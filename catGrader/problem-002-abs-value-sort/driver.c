/** IncludeLibs
 * This section is used to include the required libraries for proper functioning of the master and student solutions.
 * Some libraries might be appended here during execution from student solution, if not included here initially.
 */
// @IncludeLibs_Start
#include <assert.h>
#include <stdlib.h>
// @IncludeLibs_End

#define MAX_SIZE 10

/** DeclareFunctionProtypes
 * This section is used to declare the function prototypes for the master and student solution methods.
 * Keep note of the return type and param types.
 */
// @DeclareFunctionProtypes_Start
int solve_master(int *, int);
int solve_student(int *, int);
// @DeclareFunctionProtypes_End

// Include the AutoVal method prototypes [IMPORTANT]
void klee_make_symbolic(void *addr, size_t nbytes, const char *name);
// void atvl_set_value();

int main() {
    /** DeclareParams
     * This section is used to declare the variables for the function parameters.
     * Here, we declare the parameters to be passed as inputs to the master and student solutions.
     */
    // @DeclareParams_Start
    int n = MAX_SIZE;
    int arr[MAX_SIZE];
    int arr1[MAX_SIZE];
    int arr2[MAX_SIZE];
    // @DeclareParams_End

    /** SetSymbols
     * This section is used to set variables as symbols by calling the atvl_mksym() method.
     * This is an important section, since, this will be manipulated later on to run the testcases.
     * Here testcases are the counter-examples that are generated by KLEE during assertion check.
     */
    // @SetSymbols_Start
    // klee_make_symbolic(&n, sizeof(n), "n");
    klee_make_symbolic(&arr, sizeof(arr), "arr");
    // memcpy(arr2, arr1, MAX_SIZE * sizeof(int));
    for (int i = 0; i < n; i++) {
        // klee_make_symbolic(&arr[i], sizeof(int), "input");
        arr1[i] = arr[i];
        arr2[i] = arr[i];
    }
    // @SetSymbols_End

    /** CheckPreConditions
     * This section is used to assert the Pre-conditions for the input space.
     */
    // @CheckPreConditions_Start
    if (n < 1) exit(EXIT_FAILURE);
    if (n >= MAX_SIZE) exit(EXIT_FAILURE);
    // for (int i = 0; i < n; i++)
    //     if (arr[i] < -5 || arr[i] > 5)
    //         exit(EXIT_FAILURE);
    // @CheckPreConditions_End

    /** CallMethods
     * This section is used to execute the master (i.e., the reference solution) and the student submitted solutions.
     * The return values, i.e, the outputs of the functions are acquired to later on assert the semantic equivalence.
     * The same set of parameters are passed on to both the master and the student solutions/ methods.
     */
    // @CallMethods_Start
    int *return_arr_1 = solve_master(arr1, n);
    int *return_arr_2 = solve_student(arr2, n);
    // @CallMethods_End

    /** CheckAssertions
     * This section is used to assert the simmilarities of the outputs of the master and student methods.
     */
    // @CheckAssertions_Start
    for (int i = 0; i < n; i++) {
        printf("%d-%d\n", arr1[i], arr2[i]);
        klee_assert(arr1[i] == arr2[i]);
    }
    // @CheckAssertions_End

    return 0;
}
